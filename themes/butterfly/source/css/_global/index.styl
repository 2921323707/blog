:root
  --global-font-size: $font-size
  --global-bg: $body-bg
  --font-color: $font-black
  --hr-border: lighten($theme-hr-color, 50%)
  --hr-before-color: lighten($theme-hr-color, 30%)
  --search-bg: $search-bg
  --search-input-color: $search-input-color
  --search-a-color: $search-a-color
  --preloader-bg: $preloader-bg
  --preloader-color: $preloader-word-color
  --tab-border-color: $tab-border-color
  --tab-button-bg: $tab-button-bg
  --tab-button-color: $tab-button-color
  --tab-button-hover-bg: $tab-button-hover-bg
  --tab-button-active-bg: $tab-button-active-bg
  --card-bg: $card-bg
  --card-meta: $theme-meta-color
  --sidebar-bg: $sidebar-background
  --sidebar-menu-bg: $white
  --btn-hover-color: $button-hover-color
  --btn-color: $button-color
  --btn-bg: $button-bg
  --text-bg-hover: rgba($text-bg-hover, .7)
  --light-grey: $light-grey
  --dark-grey: $dark-grey
  --white: $white
  --text-highlight-color: $text-highlight-color
  --blockquote-color: $blockquote-color
  --blockquote-bg: $blockquote-background-color
  --reward-pop: $reward-pop-up-bg
  --toc-link-color: $toc-link-color
  --card-box-shadow: 0 3px 8px 6px rgba(7, 17, 27, .05)
  --card-hover-box-shadow: 0 3px 8px 6px rgba(7, 17, 27, .09)
  --pseudo-hover: $pseudo-hover
  --headline-presudo: #a0a0a0
  --scrollbar-color: $scrollbar-color
  --default-bg-color: $theme-color
  --zoom-bg: #fff
  --mark-bg: alpha($dark-black, .3)

// tags plugin
:root
  --btn-color: $btn-color
  --btn-default-color: $btn-default-color
  --tags-blue-color: $tagsP-blue-color
  --tags-blue-color-lighten: lighten($tagsP-blue-color, 85%)
  --tags-pink-color: $tagsP-pink-color
  --tags-pink-color-lighten: lighten($tagsP-pink-color, 85%)
  --tags-red-color: $tagsP-red-color
  --tags-red-color-lighten: lighten($tagsP-red-color, 85%)
  --tags-orange-color: $tagsP-orange-color
  --tags-orange-color-lighten: lighten($tagsP-orange-color, 85%)
  --tags-purple-color: $tagsP-purple-color
  --tags-purple-color-lighten: lighten($tagsP-purple-color, 85%)
  --tags-green-color: $tagsP-green-color
  --tags-green-color-lighten: lighten($tagsP-green-color, 85%)
  --note-default-border: $note-default-border
  --note-default-bg: $note-default-bg
  --note-default-text: $note-default-text
  --note-modern-default-border: $note-modern-default-border
  --note-modern-default-bg: $note-modern-default-bg
  --note-modern-default-text: $note-modern-default-text
  --note-modern-default-hover: $note-modern-default-hover
  --note-primary-border: $note-primary-border
  --note-primary-bg: $note-primary-bg
  --note-primary-text: $note-primary-text
  --note-modern-primary-border: $note-modern-primary-border
  --note-modern-primary-bg: $note-modern-primary-bg
  --note-modern-primary-text: $note-modern-primary-text
  --note-modern-primary-hover: $note-modern-primary-hover
  --note-info-border: $note-info-border
  --note-info-bg: $note-info-bg
  --note-info-text: $note-info-text
  --note-modern-info-border: $note-modern-info-border
  --note-modern-info-bg: $note-modern-info-bg
  --note-modern-info-text: $note-modern-info-text
  --note-modern-info-hover: $note-modern-info-hover
  --note-success-border: $note-success-border
  --note-success-bg: $note-success-bg
  --note-success-text: $note-success-text
  --note-modern-success-border: $note-modern-success-border
  --note-modern-success-bg: $note-modern-success-bg
  --note-modern-success-text: $note-modern-success-text
  --note-modern-success-hover: $note-modern-success-hover
  --note-warning-border: $note-warning-border
  --note-warning-bg: $note-warning-bg
  --note-warning-text: $note-warning-text
  --note-modern-warning-border: $note-modern-warning-border
  --note-modern-warning-bg: $note-modern-warning-bg
  --note-modern-warning-text: $note-modern-warning-text
  --note-modern-warning-hover: $note-modern-warning-hover
  --note-danger-border: $note-danger-border
  --note-danger-bg: $note-danger-bg
  --note-danger-text: $note-danger-text
  --note-modern-danger-border: $note-modern-danger-border
  --note-modern-danger-bg: $note-modern-danger-bg
  --note-modern-danger-text: $note-modern-danger-text
  --note-modern-danger-hover: $note-modern-danger-hover

body
  position: relative
  overflow-y: scroll
  min-height: 100%
  background: var(--global-bg)
  color: var(--font-color)
  font-size: var(--global-font-size)
  font-family: $font-family
  line-height: $text-line-height
  -webkit-tap-highlight-color: rgba(0, 0, 0, 0)
  scroll-behavior: smooth

  if !hexo-config('copy.enable')
    user-select: none
    -webkit-user-select: none

// scrollbar - firefox
@-moz-document url-prefix()
  *
    scrollbar-width: thin
    scrollbar-color: var(--scrollbar-color) transparent

// scrollbar - chrome/safari
*::-webkit-scrollbar
  width: 5px
  height: 5px

*::-webkit-scrollbar-thumb
  background: var(--scrollbar-color)

*::-webkit-scrollbar-track
  background-color: transparent

input::placeholder
  color: var(--font-color)

if hexo-config('background')
  #web_bg
    position: fixed
    z-index: -999
    width: 100%
    height: 100%
    background-attachment: local
    background-position: center
    background-size: cover
    background-repeat: no-repeat

h1,
h2,
h3,
h4,
h5,
h6
  position: relative
  margin: 20px 0 14px
  color: var(--text-highlight-color)
  font-weight: bold

  code
    font-size: inherit !important

*
  box-sizing: border-box

.table-wrap
  overflow-x: scroll
  margin: 0 0 20px

  if hexo-config('rounded_corners_ui')
    $borderRadius = 5px
    border-radius: $borderRadius

    table
      border-radius: $borderRadius

      thead > tr:first-child
        th:first-child
          border-top-left-radius: $borderRadius

        th:last-child
          border-top-right-radius: $borderRadius

      tbody > tr:last-child
        td:first-child
          border-bottom-left-radius: $borderRadius

        td:last-child
          border-bottom-right-radius: $borderRadius

table
  display: table
  width: 100%
  border-spacing: 0
  border-collapse: separate
  border-top: 1px solid var(--light-grey)
  border-left: 1px solid var(--light-grey)
  empty-cells: show

  thead
    background: alpha($table-thead-bg, 10%)

  th,
  td
    padding: 6px 12px
    border: 1px solid var(--light-grey)
    border-top: none
    border-left: none
    vertical-align: middle

*::selection
  background: $theme-text-selection-color
  color: #F7F7F7

button
  padding: 0
  outline: 0
  border: none
  background: none
  cursor: pointer
  touch-action: manipulation

a
  color: $a-link-color
  text-decoration: none
  word-wrap: break-word
  transition: all .2s
  overflow-wrap: break-word

  &:hover
    color: $light-blue

// font
if $site-name-font
  #site-title,
  #site-subtitle,
  .site-name,
  #aside-content .author-info-name,
  #aside-content .author-info-description
    font-family: $site-name-font

.text-center
  text-align: center

.text-right
  text-align: right

img
  &[src=''],
  &:not([src])
    opacity: 0

// lazyload blur
if hexo-config('lazyload.enable') && hexo-config('lazyload.blur') && !hexo-config('lazyload.placeholder')
  img
    &[data-lazy-src]:not(.loaded)
      filter: blur(8px) brightness(1)

    &[data-lazy-src].error
      filter: none

// lazyload fade in animation
if hexo-config('lazyload.enable')
  img
    // 懒加载图片初始状态：透明
    &[data-lazy-src]:not(.loaded):not(.error):not(.loading)
      opacity: 0
      transition: opacity 0.6s ease-in-out

    // 懒加载图片加载中：显示占位背景和加载动画
    &[data-lazy-src].loading,
    &[data-lazy-src][data-ll-status="loading"]
      opacity: 0.2
      transition: opacity 0.3s ease-in-out
      filter: blur(2px)

    // 懒加载图片加载完成后：显示
    &[data-lazy-src].loaded,
    &[data-lazy-src][data-ll-status="loaded"],
    &[data-lazy-src].entered.loaded
      opacity: 1
      filter: blur(0)

  // 为文章封面图片添加淡入动画
  .post-bg
    &[data-lazy-src]:not(.loaded):not(.error):not(.loading)
      opacity: 0
      transition: opacity 0.6s ease-in-out, transform .6s, filter 375ms ease-in .2s

    &[data-lazy-src].loading,
    &[data-lazy-src][data-ll-status="loading"]
      opacity: 0.2
      transition: opacity 0.3s ease-in-out, filter 0.3s ease-in-out
      filter: blur(2px)

    &[data-lazy-src].loaded,
    &[data-lazy-src][data-ll-status="loaded"],
    &[data-lazy-src].entered.loaded,
    &.entered.loaded
      opacity: 1
      filter: blur(0)

  // 懒加载加载指示器样式（Skeleton Screen）
  .lazyload-spinner
    position: absolute
    top: 0
    left: 0
    z-index: 10
    display: flex
    align-items: center
    justify-content: center
    width: 100%
    height: 100%
    pointer-events: none
    opacity: 1
    transition: opacity 0.3s ease-in-out
    background: var(--card-bg)
    border-radius: 8px
    overflow: hidden

    // 骨架屏渐变背景（适配深色和浅色主题）
    &::before
      content: ''
      position: absolute
      top: 0
      left: 0
      width: 100%
      height: 100%
      background: linear-gradient(90deg, 
        rgba(0, 0, 0, 0) 0%, 
        rgba(0, 0, 0, 0.03) 20%,
        rgba(0, 0, 0, 0.06) 60%,
        rgba(0, 0, 0, 0.03) 80%,
        rgba(0, 0, 0, 0) 100%)
      background-size: 200% 100%
      animation: lazyload-shimmer 1.5s ease-in-out infinite

    // 深色主题下的骨架屏效果
    [data-theme='dark'] &
      background: var(--card-bg)
      &::before
        background: linear-gradient(90deg, 
          rgba(255, 255, 255, 0) 0%, 
          rgba(255, 255, 255, 0.02) 20%,
          rgba(255, 255, 255, 0.05) 60%,
          rgba(255, 255, 255, 0.02) 80%,
          rgba(255, 255, 255, 0) 100%)
        background-size: 200% 100%

    // 可选的加载动画图标（较小且居中）
    .spinner-ring
      position: relative
      z-index: 1
      width: 32px
      height: 32px
      border: 3px solid rgba(73, 177, 245, 0.2)
      border-top-color: #49b1f5
      border-right-color: #49b1f5
      border-radius: 50%
      animation: lazyload-spin 0.8s linear infinite
      opacity: 0.6

      [data-theme='dark'] &
        border-color: rgba(73, 177, 245, 0.3)
        border-top-color: #49b1f5
        border-right-color: #49b1f5

  // 文章封面图专用的骨架屏样式
  .post_cover .lazyload-spinner
    background: linear-gradient(135deg, 
      rgba(73, 177, 245, 0.1) 0%,
      rgba(73, 177, 245, 0.05) 100%)

    [data-theme='dark'] &
      background: linear-gradient(135deg, 
        rgba(73, 177, 245, 0.15) 0%,
        rgba(73, 177, 245, 0.08) 100%)

    &::before
      background: linear-gradient(90deg, 
        rgba(255, 255, 255, 0) 0%, 
        rgba(255, 255, 255, 0.1) 20%,
        rgba(255, 255, 255, 0.15) 60%,
        rgba(255, 255, 255, 0.1) 80%,
        rgba(255, 255, 255, 0) 100%)
      background-size: 200% 100%

    .spinner-ring
      opacity: 0.8
      border-color: rgba(73, 177, 245, 0.3)
      border-top-color: #49b1f5
      border-right-color: #49b1f5

  // 旋转动画
  @keyframes lazyload-spin
    0%
      transform: rotate(0deg)
    100%
      transform: rotate(360deg)

  // 骨架屏光晕动画
  @keyframes lazyload-shimmer
    0%
      background-position: -200% 0
    100%
      background-position: 200% 0

.img-alt
  margin: -10px 0 10px
  color: #858585

  &:hover
    text-decoration: none !important

blockquote
  margin: 0 0 20px
  padding: 7px 15px
  border-left: 4px solid $blockquote-padding-color
  background-color: var(--blockquote-bg)
  color: var(--blockquote-color)
  addBorderRadius()

  footer
    cite
      &:before
        padding: 0 5px
        content: '—'

  & > :last-child
    margin-bottom: 0 !important

.fa-fw
  width: 1.25em
  text-align: center